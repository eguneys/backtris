var Tetris=function(n){var t={};function e(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=n,e.c=t,e.d=function(n,t,i){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:i})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(i,o,function(t){return n[t]}.bind(null,o));return i},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){n.exports=e(1)},function(n,t,e){e(2);const i=e(3);n.exports=i.app},function(n,t,e){},function(n,t,e){"use strict";function i(){const n={};return n.scoreLabel=a("SCORE"),n.grid=o(),n}e.r(t);const o=()=>r(1024,1024,(n,t,e,i)=>{const o=.01*t;e.strokeStyle="white",e.lineWidth=1,e.beginPath(),e.fillStyle="white",e.moveTo(0,0);for(let i=0;i<n;i+=o)e.moveTo(i,0),e.lineTo(i,t);for(let i=0;i<t;i+=o)e.moveTo(0,i),e.lineTo(n,i);return e.stroke(),i}),a=n=>r(100*n.length*.5,100,(t,e,i,o)=>(i.font="50pt Comic Sans",i.fillStyle="white",i.textAlign="center",i.textBaseline="middle",i.fillText(n,t/2,50),o));function r(n,t,e){var i=document.createElement("canvas");return i.width=n,i.height=t,e(n,t,i.getContext("2d"),i),i}function l(n,t){return Object.keys(n).reduce((e,i)=>({[i]:t(i,n[i]),...e}),{})}const s={futil:"float usin(float v) {\n  return (sin(v) + 1.0) / 2.0;\n}\n\nfloat sdEquilateralTriangle( in vec2 p ) {\n  const float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x+k*p.y>0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdLine( in vec2 p, in vec2 a, in vec2 b )\n{\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );\n    return length( pa - ba*h );\n}\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b )\n{\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdRoundedBox(vec2 p, vec2 b, float r )\n{\n  return sdBox(p, b) - r;\n}\n\nfloat opBlend(float d1, float d2, float a)\n{\n return a * d1 + (1.0 - a) * d2;\n}\n\nfloat opUnion(float d1, float d2) {\n  return min(d1, d2);\n}\n\nfloat opSubtraction(float d1, float d2) {\n  return max(-d1, d2);\n}\n\nfloat opIntersection(float d1, float d2) {\n  return max(d1, d2);\n}\n\nvec2 opRep(vec2 p, vec2 c)\n{\n  vec2 q = mod(p,c)-0.5*c;\n  return q;\n}\n\n// vec2 screenToWorld(vec2 screen) {\n//   vec2 result = 2.0 * (screen/uResolution.xy - 0.5);\n//   result.x *= uResolution.x/uResolution.y;\n//   return result;\n// }\n\n// vec2 screenToWorld2(vec2 screen) {\n//   screen.x *= uResolution.x/uResolution.y;\n//   return screen;\n// }\n\nmat3 affineMatrix(vec2 translation, float rotation) {\n  return mat3(cos(rotation), -sin(rotation), 0.0,\n              sin(rotation), cos(rotation), 0.0,\n              translation.x, translation.y, 1.0);\n}\n\nvec2 transform(vec2 p, vec2 trans, float rotate, float scale) {\n  return (-inverse(affineMatrix(trans, rotate)) * vec3(p, 1.0)).xy;\n}\n\n\nvec2 translate(vec2 p, vec2 trans) {\n  return transform(p, trans, 0.0, 1.0);\n}\n\nvec2 rotate(vec2 p, float angle) {\n  return transform(p, vec2(0.0), angle, 1.0);\n}\n",fdefs:"#define PI 3.14\n#define HALFPI (PI * 0.5)\n#define TAU (PI * 2.0)\n",fcolors:"#define colWhite vec4(1.0)\n#define colBlue vec4(0.0, 0.0, 1.0, 1.0)\n#define colYellow vec4(1.0, 1.0, 0.0, 1.0)\n#define colGB vec4(0.0, 1.0, 1.0, 1.0)\n#define colBlack vec4(0.0, 0.0, 0.0, 1.0)\n#define colYellowG vec4(1.0, 1.0, 0.3, 1.0)\n#define colPurpleG vec4(0.2, 0.1, 0.2, 1.0)\n\n",feffects:"// https://www.shadertoy.com/view/3llSz4\nvoid vsprites(out vec4 col, vec2 p) {\n\n  p.y += uTime * 0.001;\n\n  vec4 col1 = vec4(255., 255., 0., 1.0);\n  vec4 col2 = vec4(0., 255., 255., 1.0);\n  vec4 col3 = vec4(255., 0., 180., 1.0);\n\n  float d = mod(floor(p.y * 8.0), 3.0);\n\n  if (d == 0.0) {\n    col = col1;\n  } else if (d == 1.0) {\n    col = col2;\n  } else {\n    col = col3;\n  }\n\n}\n\n\n// https://www.shadertoy.com/view/3tj3Rw\nvoid hsprites(out vec4 col, vec2 p) {\n\n  float res = 2.0;\n\n  float t= uTime * 0.005;\n  t += sin(t) + 1.0;\n  float offset = t * .5;\n  // offset *= ceil(p.y * res) * .25;\n\n  float flip = round(fract(p.y));\n  p.x += (flip-.5) * offset;\n\n  vec2 u = p * res;\n\n  int i = int(ceil(u.x) + ceil(u.y));\n\n  float k = 0.0;\n\n  if (i % 6 == 0) {\n    k += 1.0;\n  }\n\n  vec4 front = vec4(1.0, 1.0, 0.3, 1.0),\n    back = vec4(0.2, 0.1, 0.2, 1.0);\n\n  col = mix(front, back, clamp(k, 0.0, 1.0));\n}\n\n// https://www.shadertoy.com/view/tdjXWW\nfloat sdHalfCircle(vec2 p) {\n  p *= 0.7;\n  p.y += floor(p.y);\n  return sdCircle(p, 0.2);\n}\n\nvoid colHalfCircle(out vec4 col, vec2 p) {\n  float d = sdHalfCircle(p);\n\n  col = colYellow;\n\n  col = mix(col, colBlack, 1.0 - smoothstep(0.0, 0.01, d));\n}\n\n\n// https://www.shadertoy.com/view/ldyyzV\nvoid colPulsingRotations(out vec4 col, vec2 p) {\n\n  float area = 1.2;\n  float size = 0.03;\n\n  float dist = length(p);\n\n  float way = 0.0;\n\n  float max = 28.0;\n\n  float speed = sin(uTime * 0.001);\n\n  if (dist <= area + size) {\n\n    for (float i = 0.0; i < max; i++) {\n      float radius = area - size * 2.0 * i;\n      float angle = speed * (i + 1.0);\n      if (dist > radius && dist < radius + size &&\n          sin(angle) * p.x + cos(angle) * p.y > 0.0) {\n        way = //smoothstep(radius, radius + size / 4.5, dist); //*\n          smoothstep(radius + size, radius + size / 1.2, dist);\n      }\n    }\n  }\n\n\n  col = mix(colBlue, colWhite, way);\n  \n}\n\n// https://www.shadertoy.com/view/4lVXzK\nvoid colGlowyCircle(out vec4 col, vec2 p) {\n\n  float timer = usin(uTime * 0.005);\n\n  float radius = 2.0/timer;\n\n  float ring = length(p)*4.0 - radius;\n  ring = min(3.0, abs(1.0/(10.0*ring)));\n  ring = max(0.0, ring-timer);\n    \n\n  col = vec4(ring * 0.3, ring+ 0.05, ring - 0.05, 1.0);\n  \n}\n"},c=/#include (\w+)/;var u=l({vmain:"#version 300 es\n\nprecision mediump float;\n\nin vec2 aPosition;\n\nin vec2 aTexCoord;\n\nout vec2 vQuadCoord;\n\nuniform vec2 uResolution;\n\nuniform mat3 uMatrix;\n\nvoid main() {\n\n  vec2 position = (uMatrix * vec3(aPosition, 1)).xy;\n\n  vQuadCoord = aTexCoord;\n\n  gl_Position = vec4(position, 0, 1);\n\n}\n",fhero:"#version 300 es\n\n#include fcolors\n#include fdefs\n\nprecision mediump float;\n\nuniform vec2 uResolution;\nuniform float uTime;\n\nin vec2 vQuadCoord;\n\nout vec4 outColor;\n\n#include futil\n#include feffects\n\nvoid main() {\n  \n  outColor = colYellowG;\n  \n}\n",fwall:"#version 300 es\n\n#include fcolors\n#include fdefs\n\nprecision mediump float;\n\nuniform vec2 uResolution;\nuniform float uTime;\n\nin vec2 vQuadCoord;\n\nout vec4 outColor;\n\n#include futil\n#include feffects\n\nvoid main() {\n  \n  outColor = colYellowG;\n  \n}\n",vtexture:"#version 300 es\n\nprecision mediump float;\n\nin vec2 aPosition;\n\nin vec2 aTexCoord;\n\nout vec2 vQuadCoord;\n\nuniform vec2 uResolution;\n\nuniform mat3 uMatrix;\n\nvoid main() {\n\n  vec2 position = (uMatrix * vec3(aPosition, 1)).xy;\n\n  vQuadCoord = (aTexCoord + 1.0) / 2.0;\n\n  gl_Position = vec4(position, 0, 1);\n\n}\n",ftexture:"#version 300 es\n\nprecision mediump float;\n\nuniform float uTime;\nuniform vec2 uResolution;\nuniform sampler2D uTexture;\n\nuniform vec2 uSqueeze;\n\nin vec2 vQuadCoord;\n\nout vec4 outColor;\n\n\nvoid main() {\n  outColor = texture(uTexture, vQuadCoord);\n  // outColor = vec4(1.0, 0.0, 0.0, 1.0);\n}\n",fbg:"#version 300 es\n\n#include fcolors\n#include fdefs\n \nprecision mediump float;\n\nuniform vec2 uResolution;\nuniform float uTime;\n\nin vec2 vQuadCoord;\n\nout vec4 outColor;\n\n#include futil\n#include feffects\n\nvoid main() {\n\n  vec2 p = vQuadCoord;\n  p.x *= uResolution.x/uResolution.y;\n\n  vec4 col = vec4(0.5, 0.5, 0.5, 0.0);\n\n  // colGlowyCircle(col, p);\n  // hsprites(col, p);\n  col = colPurpleG;\n\n\n  outColor = col;\n}\n"},(n,t)=>(function n(t){const e=t.match(c);if(e){e[1];return t=t.replace(e[0],s[e[1]]),n(t)}return t})(t));const d=Math.PI;function f(n,t){return Math.floor(function(n,t){return Math.random()*(t-n)+n}(n,t))}const h={identity:function(){return[1,0,0,0,1,0,0,0,1]},transform:function(n,t,e,i,o){let a=h.identity();return a=h.multiply(a,h.projection(n[0],n[1])),a=h.multiply(a,h.translation(t[0],t[1])),a=h.multiply(a,h.translation(o[0],o[1])),a=h.multiply(a,h.rotation(e)),a=h.multiply(a,h.scaling(i[0],i[1])),a=h.multiply(a,h.translation(-o[0],-o[1]))},projection:function(n,t){return[2/n,0,0,0,-2/t,0,-1,1,1]},translation:function(n,t){return[1,0,0,0,1,0,n,t,1]},rotation:function(n){var t=Math.cos(n),e=Math.sin(n);return[t,-e,0,e,t,0,0,0,1]},scaling:function(n,t){return[n,0,0,0,t,0,0,0,1]},multiply:function(n,t){var e=n[0],i=n[1],o=n[2],a=n[3],r=n[4],l=n[5],s=n[6],c=n[7],u=n[8],d=t[0],f=t[1],h=t[2],p=t[3],m=t[4],v=t[5],x=t[6],g=t[7],w=t[8];return[d*e+f*a+h*s,d*i+f*r+h*c,d*o+f*l+h*u,p*e+m*a+v*s,p*i+m*r+v*c,p*o+m*l+v*u,x*e+g*a+w*s,x*i+g*r+w*c,x*o+g*l+w*u]}};var p=h;function m(n,t){const{width:e,height:i}=n.game;t.clearColor(0,0,0,1),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),t.disable(t.DEPTH_TEST),this.minibatch=[],this.addTexture=(n,t,e)=>{a(n,{uTexture:[],...e,...o(t,n)})},this.addQuad=(n,t,e={})=>{a(n,{...e,...o(t,n)})};const o=({pivot:n,translation:o,rotation:a,scale:r},l)=>{n=n||[.5*l.width,.5*l.height],o=o||[0,0],a=a||0,r=r||[1,1];const s=p.transform([e,i],o,a,r,n);return{uResolution:[t.canvas.width,t.canvas.height],uMatrix:[s]}},a=(n,t)=>{const e=Object.keys(n.uniforms).map(e=>{let i=n.uniforms[e],o=t[e];return()=>{if(!o)throw new Error("undefined uniform "+e);i(...o)}});this.minibatch.push({...n,uniforms:e})};this.makeQuad=({name:n,vSource:e,fSource:i,uniforms:o},a,r)=>{e=e||u.vmain;let s=y(t,t.VERTEX_SHADER,e),c=y(t,t.FRAGMENT_SHADER,i),d=function(n,t,e){let i=n.createProgram();if(n.attachShader(i,t),n.attachShader(i,e),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS))return i;return console.error(n.getProgramInfoLog(i)),n.deleteProgram(i),null}(t,s,c),f=t.getAttribLocation(d,"aPosition"),h=t.createBuffer(),p=t.createVertexArray();t.bindVertexArray(p),t.enableVertexAttribArray(f),t.bindBuffer(t.ARRAY_BUFFER,h);let m=0,v=a,x=0,g=r,w=[m,x,m,g,v,x,m,g,v,x,v,g];t.bufferData(t.ARRAY_BUFFER,new Float32Array(w),t.STATIC_DRAW);let T=2,R=t.FLOAT,b=!1,E=0,A=0;t.vertexAttribPointer(f,T,R,b,E,A);let S=t.getAttribLocation(d,"aTexCoord"),C=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,C),w=[m=-1,x=-1,m,g=1,v=1,x,m,g,v,x,v,g],t.bufferData(t.ARRAY_BUFFER,new Float32Array(w),t.STATIC_DRAW),t.enableVertexAttribArray(S),T=2,R=t.FLOAT,b=!0,E=0,A=0,t.vertexAttribPointer(S,T,R,b,E,A),{name:n,width:a,height:r,program:d,vao:p,uniforms:l(o,(n,e)=>e(t,d))}},this.makeSprite=({texture:n,fSource:e,uniforms:i},o,a)=>{e=e||u.ftexture;let r=this.makeQuad({vSource:u.vtexture,fSource:e,uniforms:{...i,uResolution:g("uResolution"),uMatrix:w("uMatrix"),uTexture:v("uTexture",0)}},o,a),l=t.createTexture();t.bindTexture(t.TEXTURE_2D,l);const s=t.RGBA,c=t.UNSIGNED_BYTE;return t.texImage2D(t.TEXTURE_2D,0,s,s,c,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),r={texture:l,textureUnit:0,...r}},this.render=()=>{t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT),this.minibatch.forEach(({program:n,uniforms:e,vao:i,texture:o,textureUnit:a})=>{t.useProgram(n),e.forEach(n=>n()),o&&(t.activeTexture(t.TEXTURE0+a),t.bindTexture(t.TEXTURE_2D,o)),t.bindVertexArray(i),t.drawArrays(t.TRIANGLES,0,6)}),this.minibatch=[]}}const v=(n,t)=>(e,i)=>()=>e.uniform1i(e.getUniformLocation(i,n),t),x=n=>(t,e)=>(...i)=>t.uniform1f(t.getUniformLocation(e,n),...i),g=n=>(t,e)=>(...i)=>t.uniform2f(t.getUniformLocation(e,n),...i),w=n=>(t,e)=>i=>t.uniformMatrix3fv(t.getUniformLocation(e,n),!1,i);function y(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)?i:(console.error("Cannot create shader: ["+e+"] "+n.getShaderInfoLog(i)),n.deleteShader(i),null)}function T(n,t){const{width:e,height:i}=n.data.game,o=t.makeQuad({fSource:u.fbg,uniforms:{uTime:x("uTime"),uMatrix:w("uMatrix"),uResolution:g("uResolution")}},e,i);this.render=n=>{const{tick:e}=n.data;t.addQuad(o,{},{uTime:[e]})}}function R(n,t){const{width:e,height:i,heroWidth:o,ratio:a}=n.data.game;n.data;let r=t.makeQuad({fSource:u.fhero,uniforms:{uResolution:g("uResolution"),uTime:x("uTime"),uMatrix:w("uMatrix")}},o,o);this.render=n=>{const{tick:e}=n.data,i=n.play.hero,{x:o}=n.play.camera.data,{x:a,y:l}=i.data;t.addQuad(r,{translation:[a-o,l]},{uTime:[e]})}}function b(n){const t=(()=>{let n=0;return()=>n++})();let e=[],i=[];this.alives=()=>e.length,this.acquire=(o=(()=>{}))=>{let a;return o(a=i.length>0?i.pop():n(t())),e.push(a),a},this.release=n=>{let t=e.indexOf(n);t>-1&&i.push(e.splice(t,1)[0])},this.releaseAll=()=>{e.forEach(n=>i.push(n)),e=[]},this.releaseIf=(n,t=(()=>{}))=>{let o=[],a=[];e.forEach(e=>{n(e)?(t(e),o.push(e)):a.push(e)}),e=a,i=[...o,...i]},this.each=n=>{e.forEach(n)},this.find=n=>e.find(n)}function E(n,t){const{width:e,height:i,wallWidth:o}=n.data.game,a=new b(n=>t.makeQuad({name:"wall"+n,fSource:u.fwall,uniforms:{uMatrix:w("uMatrix")}},o,o));this.render=n=>{const{x:e}=n.play.camera.data,i=n.play.walls;i.walls.each(n=>{const{x:i,y:o}=n.data;let r=a.acquire();t.addQuad(r,{translation:[i-e,o]})}),i.fallingWalls.each(n=>{const{x:i,y:o,rotation:r}=n.data;let l=a.acquire();t.addQuad(l,{translation:[i-e,o],rotation:r})})},this.release=()=>{a.releaseAll()}}function A(n,t){const{width:e,height:i}=n.data,o=new T(n,t),a=new R(n,t),r=new E(n,t);this.render=n=>{o.render(n),r.render(n),a.render(n)},this.release=()=>{r.release()}}function S(n,t){const{width:e,height:i,textures:o}=n.data,a=.2*e,r=.2*i;let l=t.makeSprite({texture:o.scoreLabel},a,r);this.render=n=>{t.addTexture(l,{translation:[(e-a)/2,(i-r)/2],rotation:0*Math.PI,scale:[1,1],pivot:[.5*e,.5*i]})}}function C(n,t){const{width:e,height:i}=n.data,o=new A(n,t);new S(n,t);this.render=n=>{o.render(n)},this.release=()=>{o.release()}}function P(n,t){const{width:e,height:i}=n.data.game;let o;this.init=()=>{this.data=o={...a()}},this.update=t=>{const i=n.hero,{x:a}=i.data;a<e/2&&(o.x=a-e/2)};const a=()=>({x:0})}function _(n,t){const{width:e,height:i,heroWidth:o,gravity:a}=n.data.game;let r;this.init=n=>{this.data=r={...f()}};let l=0;const s=.2*-a;let c=0;let u=!1;const d=n=>{u&&c<2&&(u=!1,c++,(n=>{l=0,r.vy=-r.jumpVy,r.y-=1,1===c&&(r.vx*=2)})())};this.hitWall=n=>{c=0,l=-a,r.vy=0,r.y=n.data.y-r.height},this.userJump=()=>{u=!0},this.update=n=>{d(),(n=>{const t=.01*n;r.vy+=l*t,r.vy+=a*t,r.x+=r.vx*t,r.y+=r.vy*t,r.vx+=(s-r.vx)*t,l=0})(n)};const f=()=>({width:o,height:o,x:e-o,y:0,vx:.2*-a,vy:0,ax:-100,ay:0,jumpVy:a})}function k(n,t){const{width:e,height:i,wallWidth:o}=n.data.game;this.walls=new b(()=>new M(n,t)),this.fallingWalls=new b(()=>new M(n,t)),this.init=()=>{this.data=d(),this.walls.releaseAll(),l()};let a=e;const r=n=>{const t=this.walls.acquire(t=>t.init({height:n,x:a}));return a-=1*t.data.width,t},l=()=>{const n=f(.1*i,.4*i),t=f(3,8);for(let e=0;e<t;e++)r(n)},s=n=>{this.fallingWalls.acquire(t=>{t.init({x:n.data.x,height:n.data.height,falling:!0})})},c=t=>{const{x:i}=n.camera.data;this.walls.releaseIf(n=>n.data.x-.5*e>i,s),this.fallingWalls.releaseIf(n=>n.data.x-e>i)},u=t=>{const e=n.hero,i=this.walls.find(n=>(function(n,t){return n.x<t.x+t.width&&n.x+n.width>t.x&&n.y<t.y+t.height})(n.data,e.data));i&&e.hitWall(i)};this.update=t=>{(t=>{const{x:i}=n.camera.data;a+e>i&&l()})(),c(),this.walls.each(n=>n.update(t)),this.fallingWalls.each(n=>n.update(t)),u()};const d=()=>({x:0})}function M(n,t){const{width:e,height:i,gravity:o,wallWidth:a}=n.data.game;this.init=n=>{this.data={...s(),...n},this.data.y=i-this.data.height};const r=n=>{const t=.01*n;this.data.rotation+=-.1*d*t,this.data.y+=.1*o*t},l=n=>{this.data.falling&&r(n)};this.update=n=>{l(n)};const s=()=>({x:0,width:a,height:.3*i,rotation:0,falling:!1})}function U(n,t){let e;this.data=n.data,this.camera=new P(this,t),this.hero=new _(this,t),this.walls=new k(this,t),this.init=()=>{e={},this.camera.init(),this.hero.init(),this.walls.init()},this.spaceHit=()=>{this.hero.userJump()},this.update=n=>{this.hero.update(n),this.walls.update(n),this.camera.update(n)}}function W(n,t){this.data={tick:0,...n},this.play=new U(this,t),this.play.init(this),this.spaceHit=()=>{this.play.hero.userJump()},this.update=n=>{this.data.tick++,this.play.update(n)}}const L=void 0!==window.performance?window.performance:Date,I=()=>L.now(),B=window.requestAnimationFrame;function Q(n,t=60){let e=!1,i=I(),o=0,a=1e3/t,r=0;this.start=()=>e?this:(e=!0,i=I(),o=B(l),this),this.stop=()=>(e=!1,0!=o&&B.cancel(o),o=0,this);const l=()=>{o=B(l);const t=I(),e=t-i;(r+=e)>=a&&(n(e),r=0),i=t}}function D(n,t,e){return n.addEventListener(t,e),()=>n.removeEventListener(t,e)}function F(n,t){const e=document.createElement("canvas"),o=e.getContext("webgl2");n.append(e);const a=e.clientWidth,r=e.clientHeight;e.width=a,e.height=r;const l={...(s=a,c=r,{game:{width:s,height:c,wallWidth:.2*s,heroWidth:.1*c,ratio:c/s,gravity:500}}),textures:i()};var s,c;let u=new m(l,o),d=new W(l,u),f=new C(d,u);new Q(n=>{d.update(n),f.render(d),u.render(),f.release()},60).start(),function(n){const t=[],e=function(n){return function(t){switch(t.code){case"Space":n.spaceHit();break;default:return}t.preventDefault()}}(n),i=function(n){n.code};t.push(D(document,"keydown",e)),t.push(D(document,"keyup",i))}(d)}e.d(t,"app",function(){return F})}]);